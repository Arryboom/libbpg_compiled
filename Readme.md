This the compile record for libbpg 0.9.8 on ubuntu 19.04

BPG (Better Portable Graphics) is a new image format. Its purpose is to replace the JPEG image format when quality or file size is an issue. 
official link:
#https://bellard.org/bpg/ 


sudo apt install libsdl-image1.2-dev
sudo apt-get install libpng-dev
sudo apt-get install libjpeg-dev
sudo apt install cmake
sudo apt install g++
sudo apt install g++
sudo apt install gc
sudo apt install gcc
sudo apt-get install cmake-curses-gui
sudo apt install libnuma-dev
sudo apt install yasm



in MakeFile:
add '-lnuma' numa library
add '-Wl,--no-as-needed'
eg,edit MakeFile in folder 

>```CFLAGS:=-Os -Wall -MMD -fno-asynchronous-unwind-tables -fdata-sections -ffunction-sections -fno-math-errno -fno-signed-zeros -fno-tree-vectorize -fomit-frame-pointer -Wl,--no-as-needed```
>this is not needed

```LDFLAGS+=-Wl,--gc-sections -Wl,--no-as-needed```
```LIBS:=-lrt -lnuma```

#x265
you may need compile x265 support lib first:

``sudo ./libbpg-0.9.8/x265/build/linux/make-Makefiles.bash && make &&./libbpg-0.9.8/x265/build/linux/multilib.sh``
will get 10bit,8bit,12bit folder in /libbpg-0.9.8/x265/build/linux/,cp them to /libbpg-0.9.8/x265.out/

then ``make``


#SDL 
>not needed.

https://www.libsdl.org/release/SDL-1.2.15.tar.gz


when compile got error like:
```
error: conflicting types for ‘_XData32’
```

To get a clean compile, edit **./src/video/x11/SDL_x11sym.h** around line 166 so it looks like this:  

<div style="margin:20px; margin-top:5px">

<div class="smallfont" style="margin-bottom:2px">Code:</div>

<pre class="bbcodeblock" dir="ltr" style="
		margin: 0px;
		margin-right: -99999px;
		padding: 3px;
		border: 1px inset;
		width: 98%;
		height: 130px;
		text-align: left;
		overflow: auto">#if 0
#ifdef LONG64
SDL_X11_MODULE(IO_32BIT)
SDL_X11_SYM(int,_XData32,(Display *dpy,register long *data,unsigned len),(dpy,data,len),return)
SDL_X11_SYM(void,_XRead32,(Display *dpy,register long *data,long len),(dpy,data,len),)
#endif
#endif</pre>

</div>



#Centos

```
yum install gcc libpng-devel libjpeg-turbo-devel.x86_64 cmake numactl-devel.x86_64 gcc-c++ yasm-devel SDL-devel.x86_64 SDL_image-devel
```

the other same as ubuntu.



#Crosscompile for windows on centos
after successful compiled elf for centos.
delete the comment # before CONFIG_WIN32=y,and recover the Wl,--no-as-needed and libnuma.

``make clean``

``yum install mingw64-gcc mingw64-libpng-static mingw64-zlib.noarch``
``mingw64-libjpeg-turbo mingw64-SDL mingw64-SDL_image``
``make``

after make finished,you should able to see bpgview.exe,bpgenc.exe,bpgdec.exe

but,the default compile options in MakeFile produce a non-static pe file,you still need to copy those dynamic library to the dir where your pe file running.
![4E7D8454-F04C-25A9-74F0-45ED61845250]

![png](/dll.png)

ignore the Readme.md.
these file should able to found at /usr/x86_64-w64-mingw32/sys-root/mingw/bin/ by default.









[4E7D8454-F04C-25A9-74F0-45ED61845250]:data:image/png;base64,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